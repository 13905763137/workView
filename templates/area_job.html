{% extends 'base.html' %}
{% block head %}
    <script src="{{ url_for("static",filename="echarts.common.min.js") }}"></script>
{% endblock %}
{% block content %}
    <div id="container" style="height: 100%"></div>
    <script type="text/javascript">
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var app = {};
        option = null;
        app.title = '城市招聘需求';
        var data = {{ g.city_data_list|tojson }};
        var res = [];
        var label = []
        for (var i = 0; i < data.length; i++) {
            label.push(data[i][0]);
            res.push({
                name: data[i][0],
                value: data[i][1]
            })
        }

        option = {
            title: {
                text: 'area_city',
                subtext: '',
                x: 'center',
                "textStyle": {
                    "fontSize": 28

                }
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c} ({d}%)"
            },
            legend: {
                x: 'center',
                y: 'bottom',
                data: label
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                show: true,
                feature: {
                    mark: {show: true},
                    dataView: {show: true, readOnly: false},
                    magicType: {
                        show: true,
                        type: ['pie', 'funnel']
                    },
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            series: [
                {
                    name: '招聘需求',
                    type: 'pie',
                    radius: [50, 300],
                    center: ['50%', '50%'],
                    roseType: 'area',
                    x: '50%',               // for funnel
                    max: 3000,                // for funnel
                    sort: 'ascending',     // for funnel
                    data: res
                }
            ]
        };

        if (option && typeof option === "object") {
            myChart.setOption(option, true);
        }
    </script>>
{% endblock %}
